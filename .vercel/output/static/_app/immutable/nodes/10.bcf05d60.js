import{s as he,h as k,b as V,p as O,j as S,k as w,f as m,c as B,q as C,l as R,A as J,d as P,N as p,U as M,S as K,u as z,a1 as X,r as pe,R as me,o as ve,T as U,n as de,e as $,W as Q}from"../chunks/scheduler.4afb9c7b.js";import{S as ge,i as be,b as x,d as ee,m as te,a as se,t as le,e as ne}from"../chunks/index.da0d1e51.js";import{e as y}from"../chunks/each.e59479a4.js";import{q as ae,S as Ee,r as ke,h as Se}from"../chunks/Solves.1dd92adb.js";import{b as we}from"../chunks/environment.60829b93.js";import{r as Te,i as Oe,s as Ce}from"../chunks/solves.205925c1.js";function oe(i,e,s){const l=i.slice();return l[8]=e[s],l}function ie(i,e,s){const l=i.slice();return l[11]=e[s],l}function re(i,e,s){const l=i.slice();return l[14]=e[s],l}function ce(i){let e,s=i[14].firstname+"",l,t;return{c(){e=k("option"),l=O(s),this.h()},l(n){e=S(n,"OPTION",{});var o=w(e);l=C(o,s),o.forEach(m),this.h()},h(){e.__value=t=i[14],U(e,e.__value)},m(n,o){P(n,e,o),p(e,l)},p(n,o){o&1&&s!==(s=n[14].firstname+"")&&z(l,s),o&1&&t!==(t=n[14])&&(e.__value=t,U(e,e.__value))},d(n){n&&m(e)}}}function ue(i){let e,s=Se[i[11]]+"",l;return{c(){e=k("option"),l=O(s),this.h()},l(t){e=S(t,"OPTION",{});var n=w(e);l=C(n,s),n.forEach(m),this.h()},h(){e.__value=i[11],U(e,e.__value)},m(t,n){P(t,e,n),p(e,l)},p:de,d(t){t&&m(e)}}}function _e(i){let e,s=y(i[2]),l=[];for(let t=0;t<s.length;t+=1)l[t]=fe(oe(i,s,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},l(t){for(let n=0;n<l.length;n+=1)l[n].l(t);e=$()},m(t,n){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,n);P(t,e,n)},p(t,n){if(n&4){s=y(t[2]);let o;for(o=0;o<s.length;o+=1){const b=oe(t,s,o);l[o]?l[o].p(b,n):(l[o]=fe(b),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}},d(t){t&&m(e),X(l,t)}}}function fe(i){let e,s=i[8].name+"",l,t,n=i[8]._count.solves+"",o,b,g;return{c(){e=k("option"),l=O(s),t=O(" ("),o=O(n),b=O(")"),this.h()},l(v){e=S(v,"OPTION",{});var u=w(e);l=C(u,s),t=C(u," ("),o=C(u,n),b=C(u,")"),u.forEach(m),this.h()},h(){e.__value=g=i[8],U(e,e.__value)},m(v,u){P(v,e,u),p(e,l),p(e,t),p(e,o),p(e,b)},p(v,u){u&4&&s!==(s=v[8].name+"")&&z(l,s),u&4&&n!==(n=v[8]._count.solves+"")&&z(o,n),u&4&&g!==(g=v[8])&&(e.__value=g,U(e,e.__value))},d(v){v&&m(e)}}}function je(i){let e,s,l,t,n,o,b,g,v,u=i[3].length+"",d,q,E,j,F,N,A,G,Y,D=y(i[0].users),_=[];for(let a=0;a<D.length;a+=1)_[a]=ce(re(i,D,a));let L=y(Object.values(ae.CubeType)),f=[];for(let a=0;a<L.length;a+=1)f[a]=ue(ie(i,L,a));let h=i[1].user&&_e(i);return j=new Ee({props:{mobile:!0,showDate:!0}}),N=new ke({props:{isOpen:!0,isAdmin:!0}}),{c(){e=k("div"),s=k("select");for(let a=0;a<_.length;a+=1)_[a].c();l=V(),t=k("select");for(let a=0;a<f.length;a+=1)f[a].c();n=V(),o=k("select"),h&&h.c(),b=V(),g=k("p"),v=O("Count : "),d=O(u),q=V(),E=k("div"),x(j.$$.fragment),F=V(),x(N.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var c=w(e);s=S(c,"SELECT",{class:!0});var r=w(s);for(let I=0;I<_.length;I+=1)_[I].l(r);r.forEach(m),l=B(c),t=S(c,"SELECT",{class:!0});var T=w(t);for(let I=0;I<f.length;I+=1)f[I].l(T);T.forEach(m),n=B(c),o=S(c,"SELECT",{class:!0});var Z=w(o);h&&h.l(Z),Z.forEach(m),b=B(c),g=S(c,"P",{});var H=w(g);v=C(H,"Count : "),d=C(H,u),H.forEach(m),c.forEach(m),q=B(a),E=S(a,"DIV",{class:!0});var W=w(E);ee(j.$$.fragment,W),F=B(W),ee(N.$$.fragment,W),W.forEach(m),this.h()},h(){R(s,"class","svelte-nujtkw"),i[1].user===void 0&&J(()=>i[4].call(s)),R(t,"class","svelte-nujtkw"),i[1].cube===void 0&&J(()=>i[5].call(t)),R(o,"class","svelte-nujtkw"),i[1].session===void 0&&J(()=>i[6].call(o)),R(e,"class","flex items-center gap-4 p-4 text-xl"),R(E,"class","grid max-h-72 md:grid-cols-2")},m(a,c){P(a,e,c),p(e,s);for(let r=0;r<_.length;r+=1)_[r]&&_[r].m(s,null);M(s,i[1].user,!0),p(e,l),p(e,t);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(t,null);M(t,i[1].cube,!0),p(e,n),p(e,o),h&&h.m(o,null),M(o,i[1].session,!0),p(e,b),p(e,g),p(g,v),p(g,d),P(a,q,c),P(a,E,c),te(j,E,null),p(E,F),te(N,E,null),A=!0,G||(Y=[K(s,"change",i[4]),K(t,"change",i[5]),K(o,"change",i[6])],G=!0)},p(a,[c]){if(c&1){D=y(a[0].users);let r;for(r=0;r<D.length;r+=1){const T=re(a,D,r);_[r]?_[r].p(T,c):(_[r]=ce(T),_[r].c(),_[r].m(s,null))}for(;r<_.length;r+=1)_[r].d(1);_.length=D.length}if(c&3&&M(s,a[1].user),c&0){L=y(Object.values(ae.CubeType));let r;for(r=0;r<L.length;r+=1){const T=ie(a,L,r);f[r]?f[r].p(T,c):(f[r]=ue(T),f[r].c(),f[r].m(t,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=L.length}c&3&&M(t,a[1].cube),a[1].user?h?h.p(a,c):(h=_e(a),h.c(),h.m(o,null)):h&&(h.d(1),h=null),c&3&&M(o,a[1].session),(!A||c&8)&&u!==(u=a[3].length+"")&&z(d,u)},i(a){A||(se(j.$$.fragment,a),se(N.$$.fragment,a),A=!0)},o(a){le(j.$$.fragment,a),le(N.$$.fragment,a),A=!1},d(a){a&&(m(e),m(q),m(E)),X(_,a),X(f,a),h&&h.d(),ne(j),ne(N),G=!1,pe(Y)}}}function Ne(i,e,s){let l;me(i,Ce,d=>s(3,l=d));let{data:t}=e,n={user:t.users[0],cube:"N3",session:t.users[0].sessions[0]},o=[];async function b(){if(!n.session||!we)return;const d=await(await fetch(`/api/session/${n.session.id}?admin=true`)).json();Oe(d.session.solves)}ve(()=>{Te()});function g(){n.user=Q(this),s(1,n),s(0,t)}function v(){n.cube=Q(this),s(1,n),s(0,t)}function u(){n.session=Q(this),s(1,n),s(0,t)}return i.$$set=d=>{"data"in d&&s(0,t=d.data)},i.$$.update=()=>{var d;i.$$.dirty&2&&(n.cube,s(2,o=((d=n.user)==null?void 0:d.sessions.filter(q=>q.cube===n.cube))||[])),i.$$.dirty&2&&(n.session,b())},[t,n,o,l,g,v,u]}class ye extends ge{constructor(e){super(),be(this,e,Ne,je,he,{data:0})}}export{ye as component};
